{"version":3,"sources":["../../middlewares/applicationMiddleware.js"],"names":["Application","require","applicationMiddleware","req","res","next","console","log","headers","app","findOne","app_id","app_secret","err","appData","status","json","message","module","exports"],"mappings":";;AAAA;;;AAGA,IAAMA,cAAcC,QAAQ,uBAAR,CAApB;AACA,IAAIC,wBAAsB,SAAtBA,qBAAsB,CAASC,GAAT,EAAcC,GAAd,EAAmBC,IAAnB,EAAwB;AAC9CC,YAAQC,GAAR,CAAYJ,IAAIK,OAAhB;AACA,QAAIC,MAAIT,YAAYU,OAAZ,CAAoB,EAACC,QAAOR,IAAIK,OAAJ,CAAYG,MAApB,EAA2BC,YAAWT,IAAIK,OAAJ,CAAYI,UAAlD,EAApB,EAAkF,UAASC,GAAT,EAAaC,OAAb,EAAqB;AAC3G,YAAGD,GAAH,EAAO;AACHT,gBAAIW,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,EAAC,WAAWH,IAAII,OAAhB,EAAyB,WAAW,EAApC,EAArB;AACA;AACH,SAHD,MAGK;AACD,gBAAGH,OAAH,EAAW;AACPT;AACH,aAFD,MAEK;AACDA;;AAEA;AACA;AACH;AACJ;AACJ,KAdO,CAAR;AAeH,CAjBD;AAkBAa,OAAOC,OAAP,GAAejB,qBAAf","file":"applicationMiddleware.js","sourcesContent":["/**\n * Created by unoapp on 2017-11-14.\n */\nconst Application = require('../models/Application');\nvar applicationMiddleware=function(req, res, next){\n    console.log(req.headers);\n    var app=Application.findOne({app_id:req.headers.app_id,app_secret:req.headers.app_secret},function(err,appData){\n        if(err){\n            res.status(401).json({\"message\": err.message, \"payload\": {}});\n            return;\n        }else{\n            if(appData){\n                next();\n            }else{\n                next();\n\n                //res.status(401).json({\"message\": \"We know you are an explorer, but you can't go beyond this point.\", \"payload\": {}});\n                //return;\n            }\n        }\n    });\n}\nmodule.exports=applicationMiddleware;"]}